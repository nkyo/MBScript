#!/bin/bash
# info: list mail status
# options: [FORMAT]
# labels: mail
#
# example: v-list-sys-mail-status json
#
# The function lists mail server status


#----------------------------------------------------------#
#                    Variable&Function                     #
#----------------------------------------------------------#

# Argument definition
#format=${1-shell}

# Includes
#source $HESTIA/func/main.sh
source $HESTIA/conf/hestia.conf

#----------------------------------------------------------#
#                       Action                             #
#----------------------------------------------------------#

# Checking mail system
if [ -z "$MAIL_SYSTEM" ]; then
    exit
fi

# Displaying exim queue status
echo "Exim queue status"
exim -bp
echo -en "\n-------------------------------------"
echo -en  "-------------------------------------\n\n"

# Displaying exim stats
if [ -e "/var/log/exim4/mainlog" ]; then
    eximstats /var/log/exim4/mainlog 2>/dev/null
else
    eximstats /var/log/exim/main.log 2>/dev/null
fi


#----------------------------------------------------------#
#                       Hestia                             #
#----------------------------------------------------------#

exit
